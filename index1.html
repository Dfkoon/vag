<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المحقق كونان - جرائم افتراضية متقدمة</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a1a2e;
            --secondary: #16213e;
            --accent: #0f3460;
            --gold: #ffd93d;
            --success: #6bcf7f;
            --danger: #ff6b6b;
            --purple: #833ab4;
            --dark: #000000;
            --light: #ffffff;
            --gradient-primary: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            --gradient-gold: linear-gradient(45deg, #ff6b6b, var(--gold), #6bcf7f);
            --gradient-expert: linear-gradient(45deg, var(--purple), #fd1d1d, #fcb045);
            --gradient-master: linear-gradient(45deg, #434343, var(--dark));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--gradient-primary);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-gold);
        }

        .header h1 {
            font-size: 3.2em;
            margin-bottom: 10px;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
            font-weight: 900;
            letter-spacing: -1px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .detective-icon {
            font-size: 5em;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 10px rgba(255, 217, 61, 0.5));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .level-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .level-btn {
            padding: 18px 25px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .level-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255, 255, 255, 0.2), transparent);
            clip-path: polygon(0 0, 100% 0, 100% 70%, 0 100%);
        }

        .level-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(102, 126, 234, 0.4);
        }

        .level-btn.active {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        }

        .level-btn.expert {
            background: var(--gradient-expert);
        }

        .level-btn.master {
            background: var(--gradient-master);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .level-btn.master::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, gold, transparent, gold);
            z-index: -1;
            border-radius: 12px;
            animation: border-glow 2s linear infinite;
        }

        @keyframes border-glow {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .case-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .case-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-gold);
            border-radius: 20px 20px 0 0;
        }

        .case-title {
            font-size: 2.2em;
            margin-bottom: 20px;
            color: var(--gold);
            text-align: center;
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .case-difficulty {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 20px;
            font-weight: 700;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .difficulty-beginner {
            background: var(--success);
        }

        .difficulty-intermediate {
            background: var(--gold);
            color: #333;
        }

        .difficulty-advanced {
            background: var(--danger);
        }

        .difficulty-expert {
            background: var(--purple);
        }

        .difficulty-master {
            background: var(--dark);
            border: 1px solid var(--gold);
        }

        .evidence-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .evidence-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .evidence-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--accent);
            transition: all 0.3s ease;
        }

        .evidence-card:hover {
            border-color: var(--gold);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .evidence-card:hover::before {
            background: var(--gold);
        }

        .evidence-card.selected {
            border-color: var(--success);
            background: rgba(107, 207, 127, 0.1);
        }

        .evidence-card.critical {
            border-left: 5px solid var(--danger);
            animation: pulse 2s infinite;
        }

        .evidence-title {
            font-size: 1.4em;
            margin-bottom: 12px;
            color: var(--danger);
            font-weight: 700;
        }

        .evidence-type {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 12px;
            border-radius: 10px;
            font-size: 0.8em;
            color: var(--gold);
            font-weight: 600;
        }

        .solution-area {
            margin-top: 40px;
            text-align: center;
        }

        .solution-input {
            width: 100%;
            max-width: 500px;
            padding: 16px 20px;
            border: 2px solid #667eea;
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1.1em;
            text-align: center;
            margin: 10px;
            font-family: 'Cairo', sans-serif;
            transition: all 0.3s ease;
        }

        .solution-input:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(255, 217, 61, 0.3);
        }

        .solution-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .submit-btn {
            padding: 16px 45px;
            margin: 20px 10px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(45deg, var(--success), #17c0eb);
            color: white;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s ease;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(23, 192, 235, 0.4);
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .result {
            margin-top: 25px;
            padding: 25px;
            border-radius: 15px;
            font-size: 1.2em;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .result.correct {
            background: rgba(107, 207, 127, 0.2);
            border: 2px solid var(--success);
            color: var(--success);
        }

        .result.incorrect {
            background: rgba(255, 107, 107, 0.2);
            border: 2px solid var(--danger);
            color: var(--danger);
        }

        .hint {
            background: rgba(255, 217, 61, 0.1);
            border: 1px solid var(--gold);
            padding: 18px;
            border-radius: 12px;
            margin: 18px 0;
            color: var(--gold);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 25px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #17c0eb);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .timeline {
            background: rgba(0, 0, 0, 0.2);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border-left: 5px solid var(--accent);
        }

        .timeline-item {
            padding: 12px 0;
            border-right: 3px solid #667eea;
            padding-right: 18px;
            margin-bottom: 18px;
            position: relative;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            top: 50%;
            right: -8px;
            width: 15px;
            height: 15px;
            background: var(--accent);
            border-radius: 50%;
            transform: translateY(-50%);
        }

        .suspect-profile {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border-right: 4px solid var(--danger);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .suspect-profile:hover {
            transform: translateX(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7); }
            70% { transform: scale(1.02); box-shadow: 0 0 0 10px rgba(255, 107, 107, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 107, 107, 0); }
        }

        .multi-input {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 25px 0;
        }

        .conspiracy-web {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        #spiderCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
            opacity: 0.18;
        }

        body>div.container,
        body>div:not(#spiderCanvas) {
            position: relative;
            z-index: 2;
        }

        .certificate-box {
            max-width: 600px;
            margin: 40px auto 0 auto;
            background: rgba(255, 255, 255, 0.07);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            font-size: 1.2em;
            border: 1px solid rgba(255, 217, 61, 0.2);
            position: relative;
            overflow: hidden;
        }

        .certificate-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-gold);
        }

        .certificate-link {
            display: inline-block;
            margin-top: 18px;
            padding: 14px 32px;
            background: linear-gradient(45deg, var(--success), #17c0eb);
            color: var(--light);
            border-radius: 10px;
            text-decoration: none;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .certificate-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(23, 192, 235, 0.4);
        }

        .footer {
            background-color: rgba(90, 85, 85, 0.13);
            text-align: center;
            padding: 1.5rem;
            color: var(--light);
            margin-top: 40px;
            border-radius: 12px;
            font-weight: 600;
        }

        /* تأثيرات إضافية للوهم البصري */
        .glow {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 217, 61, 0.1) 0%, transparent 70%);
            filter: blur(20px);
            z-index: 1;
            animation: move-glow 15s linear infinite;
        }

        @keyframes move-glow {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(200px, 100px) rotate(90deg); }
            50% { transform: translate(400px, 0) rotate(180deg); }
            75% { transform: translate(200px, -100px) rotate(270deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }

        /* تحسينات للشاشات الصغيرة */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5em;
            }
            .level-selector {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            .evidence-grid {
                grid-template-columns: 1fr;
            }
            .multi-input {
                flex-direction: column;
            }
            .solution-input {
                margin: 8px 0;
            }
        }

        /* تحسينات إضافية للجوال */
        @media (max-width: 480px) {
            body {
                font-size: 0.95em;
                padding: 0;
            }
            .container {
                padding: 8px;
                max-width: 100vw;
            }
            .header {
                padding: 18px 0;
                margin-bottom: 18px;
            }
            .header h1 {
                font-size: 1.5em;
            }
            .header p {
                font-size: 1em;
            }
            .level-selector {
                grid-template-columns: 1fr;
                gap: 10px;
                max-width: 100vw;
            }
            .level-btn {
                padding: 12px 10px;
                font-size: 1em;
                border-radius: 8px;
            }
            .case-container {
                padding: 12px;
                margin: 10px 0;
                border-radius: 12px;
            }
            .case-title {
                font-size: 1.2em;
                margin-bottom: 10px;
            }
            .case-difficulty {
                font-size: 0.85em;
                padding: 6px 12px;
                margin-bottom: 10px;
            }
            .evidence-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            .evidence-card {
                padding: 12px;
                border-radius: 8px;
                font-size: 0.95em;
            }
            .multi-input {
                flex-direction: column;
                gap: 8px;
                margin: 12px 0;
            }
            .solution-input {
                max-width: 100%;
                padding: 10px 12px;
                font-size: 1em;
                border-radius: 8px;
            }
            .submit-btn {
                padding: 10px 18px;
                font-size: 1em;
                border-radius: 8px;
                margin: 10px 0;
            }
            .result {
                padding: 12px;
                font-size: 1em;
                border-radius: 8px;
            }
            .timeline {
                padding: 10px;
                border-radius: 8px;
                margin: 10px 0;
            }
            .timeline-item {
                padding: 8px 0;
                padding-right: 10px;
                margin-bottom: 8px;
            }
            .suspect-profile {
                padding: 10px;
                border-radius: 8px;
                margin: 8px 0;
            }
            .certificate-box {
                padding: 12px;
                font-size: 1em;
                border-radius: 8px;
            }
            .certificate-link {
                padding: 10px 18px;
                font-size: 1em;
                border-radius: 8px;
            }
            .footer {
                padding: 1rem;
                font-size: 0.95em;
                border-radius: 8px;
            }
        }
    </style>
</head>

<body>
    <canvas id="spiderCanvas"></canvas>
    <div class="glow" style="top: 10%; left: 5%;"></div>
    <div class="glow" style="top: 60%; right: 5%; background: radial-gradient(circle, rgba(107, 207, 127, 0.1) 0%, transparent 70%);"></div>
    
    <div class="container">
        <header class="header">
            <div class="detective-icon">🕵️‍♂️</div>
            <h1>المحقق كونان</h1>
            <p>اكتشف الحقيقة وراء أعقد الجرائم والمؤامرات باستخدام مهاراتك الاستدلالية والتحليلية</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <p id="caseStatus"></p>
            <div class="hint" style="margin-bottom: 18px; text-align:right;">
                <strong>ملاحظة هامة:</strong>
                <ul style="margin: 10px 0 0 0; padding-right: 18px; list-style: disc;">
                    <li>المستوى <strong>1 + 2</strong>: يمثل الجزء الثاني من السلسلة.</li>
                    <li>المستوى <strong>3 + 4</strong>: يمثل الجزء الثالث من السلسلة.</li>
                    <li>يوجد في أسفل الصفحة نموذج للحصول على شهادة المحقق كونان بعد إكمال جميع المستويات.</li>
                    <li>يجب إكمال جميع المستويات للحصول على الشهادة، مع الحرص على أخذ <strong>سكرين شوت</strong> لكل إجابة في كل مستوى.</li>
                </ul>
            </div>
        </header>

        <div class="level-selector">
            <button class="level-btn active" onclick="selectLevel(1)">المبتدئ 👶</button>
            <button class="level-btn" onclick="selectLevel(2)">المتوسط 🔍</button>
            <button class="level-btn" onclick="selectLevel(3)">المتقدم 🎯</button>
            <button class="level-btn expert" onclick="selectLevel(4)">الخبير 🧠</button>
            <button class="level-btn master" onclick="selectLevel(5)">الأسطورة 👑</button>
            <button class="level-btn master" onclick="selectLevel(6)">المؤامرات 🌍</button>
            <button class="level-btn master" disabled style="opacity:0.5; cursor:not-allowed;">مستوى متقدم 1🎯</button>
            <button class="level-btn master" disabled style="opacity:0.5; cursor:not-allowed;">مستوى متقدم 2🎯</button>
            <button class="level-btn master" disabled style="opacity:0.5; cursor:not-allowed;">مستوى متقدم 3🎯</button>
            <button class="level-btn master" disabled style="opacity:0.5; cursor:not-allowed;">مستوى متقدم 4🎯</button>
        </div>

        <div class="case-container" id="caseContainer">
            <!-- Cases will be loaded here -->
        </div>
    </div>

    <div class="certificate-box">
        <strong>من يرغب بشهادة اجتياز تعبئة الفورم التالي:</strong>
        <br>
        <a href="https://forms.gle/z2KjEW96as14QVN28" target="_blank" class="certificate-link">
            فتح نموذج الشهادة
        </a>
    </div>
    
    <br>
    <br>
    
    <footer class="footer">
        <p>جميع الحقوق محفوظة - jo.koon &copy; 2025</p>
    </footer>

    <script>
        // شبكة عنكبوتية متحركة بالخلفية
        const canvas = document.getElementById('spiderCanvas');
        const ctx = canvas.getContext('2d');
        let w = window.innerWidth;
        let h = window.innerHeight;
        canvas.width = w;
        canvas.height = h;

        function resizeSpiderCanvas() {
            w = window.innerWidth;
            h = window.innerHeight;
            canvas.width = w;
            canvas.height = h;
        }
        window.addEventListener('resize', resizeSpiderCanvas);

        // نقاط الشبكة
        const points = [];
        const rows = 10,
            cols = 16;
        for (let i = 0; i < rows; i++) {
            for (let j = 0; j < cols; j++) {
                points.push({
                    x: (j / (cols - 1)) * w + Math.random() * 20,
                    y: (i / (rows - 1)) * h + Math.random() * 20,
                    ox: (j / (cols - 1)) * w,
                    oy: (i / (rows - 1)) * h,
                    dx: Math.random() * 0.6 - 0.3,
                    dy: Math.random() * 0.6 - 0.3
                });
            }
        }

        function animateSpiderWeb() {
            ctx.clearRect(0, 0, w, h);
            // رسم الخطوط الأفقية والرأسية
            for (let i = 0; i < rows; i++) {
                ctx.beginPath();
                for (let j = 0; j < cols; j++) {
                    const idx = i * cols + j;
                    if (j === 0) ctx.moveTo(points[idx].x, points[idx].y);
                    else ctx.lineTo(points[idx].x, points[idx].y);
                }
                ctx.strokeStyle = "#fff";
                ctx.globalAlpha = 0.25;
                ctx.lineWidth = 1.2;
                ctx.stroke();
            }
            for (let j = 0; j < cols; j++) {
                ctx.beginPath();
                for (let i = 0; i < rows; i++) {
                    const idx = i * cols + j;
                    if (i === 0) ctx.moveTo(points[idx].x, points[idx].y);
                    else ctx.lineTo(points[idx].x, points[idx].y);
                }
                ctx.strokeStyle = "#ffd93d";
                ctx.globalAlpha = 0.18;
                ctx.lineWidth = 1;
                ctx.stroke();
            }
            ctx.globalAlpha = 1;

            // رسم دوائر صغيرة عند نقاط التقاطع
            points.forEach(pt => {
                ctx.beginPath();
                ctx.arc(pt.x, pt.y, 2.2, 0, Math.PI * 2);
                ctx.fillStyle = "#6bcf7f";
                ctx.globalAlpha = 0.35;
                ctx.fill();
            });
            ctx.globalAlpha = 1;

            // تحريك النقاط بشكل طفيف
            points.forEach(pt => {
                pt.x += pt.dx;
                pt.y += pt.dy;
                // العودة تدريجياً لموقعها الأصلي
                pt.x += (pt.ox - pt.x) * 0.003;
                pt.y += (pt.oy - pt.y) * 0.003;
                // عكس الاتجاه عند الاقتراب من الحدود
                if (Math.abs(pt.x - pt.ox) > 22) pt.dx *= -1;
                if (Math.abs(pt.y - pt.oy) > 22) pt.dy *= -1;
            });

            requestAnimationFrame(animateSpiderWeb);
        }
        animateSpiderWeb();

        let currentLevel = 4; // عرض قضية التلاعب بالأدوية مباشرة
        let currentCase = 1; // القضية الثانية في مستوى الخبير
        let selectedEvidence = [];
        let solvedCases = 0;
        const totalCases = 6; // تحديث هذا الرقم بناءً على عدد القضايا الفعلية

        const cases = {
            1: [
                {
                    title: "جريمة السرقة في المكتبة",
                    difficulty: "مبتدئ",
                    description: "سُرقت كتب قيمة من المكتبة الجامعية. هناك ثلاثة مشتبه بهم.",
                    evidence: [
                        {
                            title: "بصمات الأصابع",
                            content: "وُجدت بصمات على خزانة الكتب تطابق أحمد الطالب",
                            type: "فيزيائي",
                            key: "fingerprints"
                        },
                        {
                            title: "كاميرات المراقبة",
                            content: "تظهر الكاميرات أحمد يدخل المكتبة في الساعة 3:00 م ويخرج في 3:30 م",
                            type: "رقمي",
                            key: "camera"
                        },
                        {
                            title: "شهادة الشهود",
                            content: "شاهد أمين المكتبة أحمد يحمل حقيبة كبيرة عند الخروج",
                            type: "شهادة",
                            key: "witness"
                        },
                        {
                            title: "سجل الإعارة",
                            content: "الكتب المسروقة لم تكن مسجلة للإعارة لأي شخص",
                            type: "وثائقي",
                            key: "record"
                        }
                    ],
                    solution: "أحمد",
                    explanation: "جميع الأدلة تشير إلى أحمد: بصماته على الخزانة، وجوده في وقت الجريمة، وحمله حقيبة كبيرة."
                }
            ],
            2: [
                {
                    title: "جريمة الاختلاس المكتبي",
                    difficulty: "متوسط",
                    description: "اختفت أموال من صندوق الشركة. المبلغ 50,000 ريال.",
                    evidence: [
                        {
                            title: "سجل دخول النظام",
                            content: "تم الدخول للنظام المالي باستخدام حساب مريم في الساعة 9:30 م يوم الجمعة",
                            type: "رقمي",
                            key: "login"
                        },
                        {
                            title: "شهادة حارس الأمن",
                            content: "رأى خالد يغادر المبنى في الساعة 9:45 م، لكن خالد قال أنه غادر في الساعة 8:30 م",
                            type: "شهادة",
                            key: "guard"
                        },
                        {
                            title: "فحص الحواسيب",
                            content: "تم العثور على برنامج للتحكم عن بُعد مثبت على حاسوب خالد",
                            type: "تقني",
                            key: "computer"
                        }
                    ],
                    solution: "خالد",
                    explanation: "خالد استخدم برنامج التحكم عن بُعد للدخول لحساب مريم وسرقة الأموال."
                }
            ],
            3: [
                {
                    title: "جريمة القتل في الغرفة المقفلة",
                    difficulty: "متقدم",
                    description: "وُجدت الضحية في مكتبه مساء الأحد. الباب مقفل من الداخل، والنوافذ في الطابق الخامس.",
                    evidence: [
                        {
                            title: "موقع الجثة",
                            content: "الضحية جالس على مكتبه، رأسه على الطاولة، رائحة لوز مُر خفيفة",
                            type: "طب شرعي",
                            key: "body"
                        },
                        {
                            title: "نظام التكييف",
                            content: "نظام التهوية في المبنى يعمل بنظام مركزي، ويمكن التحكم به عن بُعد",
                            type: "تقني",
                            key: "ventilation"
                        },
                        {
                            title: "سجلات الدخول",
                            content: "آخر من دخل المبنى هو عامل الصيانة لنظام التكييف في الساعة 6:30 م",
                            type: "وثائقي",
                            key: "entry"
                        },
                        {
                            title: "فحص نظام التكييف",
                            content: "وُجدت بقايا مادة كيميائية في قنوات التهوية المؤدية لمكتب الضحية فقط",
                            type: "كيميائي",
                            key: "chemical"
                        }
                    ],
                    solution: "عامل الصيانة",
                    explanation: "عامل الصيانة استخدم نظام التهوية لضخ غاز سيانيد إلى مكتب الضحية."
                }
            ],
            4: [
                {
                    title: "جريمة الاختطاف الرقمي",
                    difficulty: "خبير",
                    description: "اختفى رجل أعمال مشهور. لا توجد آثار للعنف، لكن هناك رسائل تهديد رقمية معقدة وطلب فدية بالعملة المشفرة.",
                    timeline: [
                        { time: "9:00 ص", event: "آخر ظهور للضحية في منزله" },
                        { time: "10:30 ص", event: "رسالة تهديد تصل لعائلته" },
                        { time: "2:00 م", event: "طلب فدية بقيمة 2 مليون دولار بالبيتكوين" },
                        { time: "4:00 م", event: "رسالة صوتية من الضحية" },
                        { time: "6:00 م", event: "تتبع إشارة هاتف الضحية ينقطع" }
                    ],
                    suspects: [
                        {
                            name: "مارك - المطور السابق",
                            background: "طرد من شركة الضحية قبل شهرين، خبير في الأمن السيبراني",
                            alibi: "كان في المنزل يعمل على مشروع شخصي",
                            motive: "انتقام من الطرد التعسفي"
                        },
                        {
                            name: "سارة - الشريك التجاري",
                            background: "شريك في عدة مشاريع، لديها ديون كبيرة",
                            alibi: "كانت في اجتماع عمل طوال اليوم",
                            motive: "تحتاج المال لتسديد الديون"
                        },
                        {
                            name: "أليكس - ابن الضحية المنفصل",
                            background: "منقطع عن الأب منذ سنوات، مشاكل مع المخدرات",
                            alibi: "لا يوجد علم بمكانه",
                            motive: "يريد الحصول على الميراث مبكراً"
                        }
                    ],
                    evidence: [
                        {
                            title: "تحليل الرسائل الرقمية",
                            content: "الرسائل مرسلة عبر شبكة Tor، لكن تحليل أسلوب الكتابة يشير لشخص يتقن اللغة الإنجليزية كلغة أم، يستخدم مصطلحات تقنية متقدمة",
                            type: "رقمي",
                            critical: true,
                            key: "messages"
                        },
                        {
                            title: "تحليل الصوت في الرسالة الصوتية",
                            content: "الرسالة الصوتية تحتوي على ضوضاء خلفية لآلات ثقيلة وأصوات بناء، كما يوجد صدى يشير لمكان واسع مثل مستودع",
                            type: "صوتي",
                            key: "voice"
                        },
                        {
                            title: "تتبع المعاملة المالية",
                            content: "محفظة البيتكوين المطلوبة جديدة، لكنها مرتبطة بعدة معاملات صغيرة من محافظ أخرى تم استخدامها لشراء معدات تعدين",
                            type: "مالي",
                            key: "bitcoin"
                        },
                        {
                            title: "فحص كاميرات المراقبة",
                            content: "كاميرات الحية تظهر سيارة سوداء تغادر بسرعة بعد وقت قصير من آخر ظهور للضحية",
                            type: "مرئي",
                            key: "cctv"
                        }
                    ],
                    solution: "مارك",
                    explanation: "مارك هو الوحيد الذي يمتلك المهارات التقنية لإرسال الرسائل عبر Tor، ويعرف كيفية استخدام البيتكوين. الضوضاء في الرسالة الصوتية تشير إلى موقع بناء، مما يتوافق مع خلفيته كمطور سابق في مشاريع تقنية."
                },
                {               
                    title: "جريمة التلاعب بالأدوية",
                    difficulty: "خبير",
                    description: "اكتشف أن أدوية مرضى السرطان في المستشفى تم تبديلها بأدوية مزيفة. هناك ثلاثة موظفين لديهم دوافع مختلفة.",
                    evidence: [
                        {
                            title: "سجل المخزون",
                            content: "تم تسجيل دخول غير معتاد إلى نظام المخزون في الليلة التي سبقت اكتشاف الأدوية المزيفة",
                            type: "رقمي",
                            key: "inventory"
                        },
                        {
                            title: "شهادة الممرضات",
                            content: "أحد الممرضات لاحظت أن أحد الموظفين كان يتصرف بغرابة في الأيام التي سبقت الحادثة",
                            type: "شهادة",
                            key: "nurse"
                        },
                        {
                            title: "فحص الأدوية المزيفة",
                            content: "التحليل الكيميائي للأدوية المزيفة أظهر أنها تحتوي على مواد غير معتمدة طبياً",
                            type: "كيميائي",
                            key: "chemical"
                        }
                    ],
                    solution: "ليلى - الصيدلانية",
                    explanation: "ليلى كانت تعاني من ضغوط مالية كبيرة، وكانت لديها إمكانية الوصول إلى الأدوية. سجل الدخول غير المعتاد يشير إلى أنها حاولت تعديل المخزون، وشهادة الممرضة تدعم هذا."
                }
            ],
            5: [
                {
                    title: "جريمة التلاعب بالأدوية",
                    difficulty: "خبير",
                    description: "اكتشف أن أدوية مرضى السرطان في المستشفى تم تبديلها بأدوية مزيفة. هناك ثلاثة موظفين لديهم دوافع مختلفة.",
                    evidence: [
                        {
                            title: "سجل المخزون",
                            content: "تم تسجيل دخول غير معتاد إلى نظام المخزون في الليلة التي سبقت اكتشاف الأدوية المزيفة",
                            type: "رقمي",
                            key: "inventory"
                        },
                        {
                            title: "شهادة الممرضات",
                            content: "أحد الممرضات لاحظت أن أحد الموظفين كان يتصرف بغرابة في الأيام التي سبقت الحادثة",
                            type: "شهادة",
                            key: "nurse"
                        },  
                        {
                            title: "فحص الأدوية المزيفة",
                            content: "التحليل الكيميائي للأدوية المزيفة أظهر أنها تحتوي على مواد غير معتمدة طبياً",
                            type: "كيميائي",
                            key: "chemical"
                        }
                    ],
                    solution: "ليلى - الصيدلانية",
                    explanation: "ليلى كانت تعاني من ضغوط مالية كبيرة، وكانت لديها إمكانية      الوصول إلى الأدوية. سجل الدخول غير المعتاد يشير إلى أنها حاولت تعديل المخزون، وشهادة الممرضة تدعم هذا."
                }
            ],
            6: [
                {
                    title: "مؤامرة التلاعب بالانتخابات",
                    difficulty: "المؤامرات",
                    description: "اكتشف أن هناك مجموعة تسعى للتلاعب بنتائج الانتخابات الوطنيةة باستخدام تقنيات متقدمة.",
                    evidence: [
                        {
                            title: "تحليل البيانات الرقمية",
                            content: "تم العثور على أنماط غير طبيعية في بيانات التصويت تشير إلى تدخل خارجي",
                            type: "رقمي",
                            key: "data"
                        },
                        {
                            title: "شهادة الموظف السابق",
                            content: "موظف سابق في اللجنة الانتخابية كشف عن محاولات للتلاعب بالنتائج",
                            type: "شهادة",
                            key: "whistleblower"
                        },
                        {
                            title: "فحص البرمجيات",
                            content: "تم اكتشاف برمجيات خبيثة في أنظمة التصويت الإلكترونية",
                            type: "تقني",
                            key: "malware"
                        }
                    ],
                    solution: "المجموعة الخارجية",
                    explanation: "التحليل الرقمي، شهادة الموظف، وفحص البرمجيات كلها تشير إلى تدخل من مجموعة خارجية تسعى للتأثير على نتائج الانتخابات."
                }
            ]
        };  
        const levelNames = {
            1: "مبتدئ",
            2: "متوسط",
            3: "متقدم",
            4: "خبير",
            5: "أسطورة",
            6: "المؤامرات"
        };
        const getLevelName = (level) => levelNames[level] || "غير معروف";
        const difficultyClasses = {
            "مبتدئ": "difficulty-beginner",
            "متوسط": "difficulty-intermediate",
            "متقدم": "difficulty-advanced",
            "خبير": "difficulty-expert",
            "أسطورة": "difficulty-master",
            "المؤامرات": "difficulty-master"
        };
        const caseContainer = document.getElementById('caseContainer');
        const caseStatus = document.getElementById('caseStatus');
        const progressBar = document.getElementById('progressBar'); 
        const levelButtons = document.querySelectorAll('.level-btn');
        const updateProgress = () => {
            const progressPercent = (solvedCases / totalCases) * 100;
            progressBar.style.width = progressPercent + '%';
            caseStatus.textContent = `لقد أكملت ${solvedCases} من ${totalCases} قضايا.`;
        };
        updateProgress();
        const selectLevel = (level) => {
            currentLevel = level;
            currentCase = 1;
            selectedEvidence = [];
            levelButtons.forEach(btn => btn.classList.remove('active'));
            levelButtons[level - 1].classList.add('active');
            loadCase();
        };
        const loadCase = () => {
            caseContainer.innerHTML = '';
            selectedEvidence = [];
            const caseData = cases[currentLevel][currentCase - 1];
            if (!caseData) {
                caseContainer.innerHTML = `<p style="text-align:center; font-size:1.2em; color:var(--gold);">لا توجد قضايا متاحة في هذا المستوى حالياً.</p>`;
                return;
            }
            const caseHTML = `
                <div class="case-header">
                    <h2>${caseData.title}</h2>
                    <span class="case-difficulty ${difficultyClasses[caseData.difficulty]}">${caseData.difficulty}</span>
                </div>
                <p style="margin-top:10px; font-size:1.1em;">${caseData.description}</p>
                ${caseData.timeline ? `
                <div class="timeline">  
                    <h3 style="margin-bottom:15px; color:var(--gold);">الجدول الزمني للأحداث:</h3>
                    ${caseData.timeline.map(item => `
                        <div class="timeline-item">
                            <strong>${item.time}</strong>: ${item.event}
                        </div>
                    `).join('')}
                </div>
                ` : ''}
                ${caseData.suspects ? `
                <div class="suspects-section">
                    <h3 style="margin-bottom:15px; color:var(--gold);">المشتبه بهم:</h3>
                    ${caseData.suspects.map(suspect => `
                        <div class="suspect-profile">
                            <h4 style="margin-bottom:8px; color:var(--danger);">${suspect.name}</h4>
                            <p><strong>الخلفية:</strong> ${suspect.background}</p>
                            <p><strong>الدليل:</strong> ${suspect.motive}</p>
                            <p><strong>البراءة:</strong> ${suspect.alibi}</p>
                        </div>
                    `).join('')}
                </div>
                ` : ''}
                <h3 style="margin-top:25px; margin-bottom:15px; color:var(--gold);">الأدلة المتاحة:</h3>
                <div class="evidence-grid">
                    ${caseData.evidence.map((evi, index) => `
                        <div class="evidence-card" onclick="toggleEvidence('${evi.key}')">
                            <h4 style="margin-bottom:8px;">${evi.title}</h4>
                            <p style="font-size:0.9em; color:rgba(255, 255, 255, 0.7);">${evi.type}</p>
                            <p style="font-size:0.85em; margin-top:10px; color:rgba(255, 255, 255, 0.6);">${evi.content.length > 60 ? evi.content.substring(0, 60) + '...' : evi.content}</p>
                            ${selectedEvidence.includes(evi.key) ? `<div class="evidence-details" style="margin-top:10px; font-size:0.85em; color:var(--light);">${evi.content}</div>` : ''}
                            ${evi.critical ? `<div style="position:absolute; top:10px; right:10px; background:var(--danger); color:var(--light); padding:2px 6px; border-radius:6px; font-size:0.75em; font-weight:700;">هام</div>` : ''}
                        </div>
                    `).join('')}
                </div>
                <div class="multi-input">
                    <input type="text" id="solutionInput" class="solution-input" placeholder="أدخل اسم المشتبه به أو الحل هنا">
                    <button class="submit-btn" onclick="submitSolution()">إرسال الحل</button>
                </div>
                <div id="resultContainer"></div>
            `;
            caseContainer.innerHTML = caseHTML;
        };
        const toggleEvidence = (key) => {
            const index = selectedEvidence.indexOf(key);
            if (index > -1) {
                selectedEvidence.splice(index, 1);
            } else {
                selectedEvidence.push(key);
            }
            loadCase();
        };
        const submitSolution = () => {
            const input = document.getElementById('solutionInput');
            const userSolution = input.value.trim();
            const resultContainer = document.getElementById('resultContainer');
            if (!userSolution) {
                alert('يرجى إدخال الحل قبل الإرسال.');
                return;
            }
            const caseData = cases[currentLevel][currentCase - 1];
            if (userSolution.toLowerCase() === caseData.solution.toLowerCase()) {
                resultContainer.innerHTML = `<div class="result correct">✅ إجابة صحيحة!</div>
                <p style="margin-top:10px; color:var(--light);">${caseData.explanation}</p>`;
                if (solvedCases < totalCases) solvedCases++;
                updateProgress();
                setTimeout(() => {
                    currentCase++;
                    if (currentCase > cases[currentLevel].length) {
                        alert('لقد أكملت جميع القضايا في هذا المستوى! اختر مستوى آخر للمتابعة.');
                    }
                    loadCase();
                }, 3000);
            } else {
                resultContainer.innerHTML = `<div class="result incorrect">❌ إجابة خاطئة. حاول مرة أخرى.</div>`;
            }
            input.value = '';
        };
        loadCase();
    </script>
    
</body>
</html>